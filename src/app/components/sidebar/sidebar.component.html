<div class="sidebar" [class.collapsed]="isCollapsed">
  <div class="top-section">
    <button (click)="toggleSidebar()" class="burger-btn">☰</button>
  </div>

  <nav class="menu">
    <button
      routerLink="/products"
      [class.collapsed]="isCollapsed"
      matTooltip="Productos"
      matTooltipPosition="right"
      matTooltipClass="tooltip-arrow"
      [matTooltipDisabled]="!isCollapsed"
    >
      <svg class="menu-icon" viewBox="0 -960 960 960" width="30" height="30">
        <path
          d="M841-518v318q0 33-23.5 56.5T761-120H201q-33 0-56.5-23.5T121-200v-318q-23-21-35.5-54t-.5-72l42-136q8-26 28.5-43t47.5-17h556q27 0 47 16.5t29 43.5l42 136q12 39-.5 71T841-518Zm-272-42q27 0 41-18.5t11-41.5l-22-140h-78v148q0 21 14 36.5t34 15.5Zm-180 0q23 0 37.5-15.5T441-612v-148h-78l-22 140q-4 24 10.5 42t37.5 18Zm-178 0q18 0 31.5-13t16.5-33l22-154h-78l-40 134q-6 20 6.5 43t41.5 23Zm540 0q29 0 42-23t6-43l-42-134h-76l22 154q3 20 16.5 33t31.5 13ZM201-200h560v-282q-5 2-6.5 2H751q-27 0-47.5-9T663-518q-18 18-41 28t-49 10q-27 0-50.5-10T481-518q-17 18-39.5 28T393-480q-29 0-52.5-10T299-518q-21 21-41.5 29.5T211-480h-4.5q-2.5 0-5.5-2v282Zm560 0H201h560Z"
        />
      </svg>
      @if (!isCollapsed) {
      <span>Productos</span>
      }
    </button>

    <button
      routerLink="/pedidos"
      [class.collapsed]="isCollapsed"
      matTooltip="Pedidos"
      matTooltipPosition="right"
      matTooltipClass="tooltip-arrow"
      [matTooltipDisabled]="!isCollapsed"
    >
      <svg class="menu-icon" viewBox="0 -960 960 960" width="30" height="30">
        <path
          d="M620-160.33 456.67-323.67 504-371l116 116 234.67-234.67L902-442.33l-282 282Zm220-408.34h-66.67v-204.66h-66.66v100H253.33v-100h-66.66v586.66H434V-120H186.67q-28.34 0-47.5-19.17Q120-158.33 120-186.67v-586.66q0-28.34 19.17-47.5Q158.33-840 186.67-840H377q8.33-35 37.33-57.5T480-920q37.33 0 66.17 22.5Q575-875 583.33-840h190q28.34 0 47.5 19.17Q840-801.67 840-773.33v204.66ZM480-773.33q17 0 28.5-11.5t11.5-28.5q0-17-11.5-28.5t-28.5-11.5q-17 0-28.5 11.5t-11.5 28.5q0 17 11.5 28.5t28.5 11.5Z"
        />
      </svg>
      @if (!isCollapsed) {
      <span>Pedidos</span>
      }
    </button>

    <button
      routerLink="/clientes"
      [class.collapsed]="isCollapsed"
      matTooltip="Clientes"
      matTooltipPosition="right"
      matTooltipClass="tooltip-arrow"
      [matTooltipDisabled]="!isCollapsed"
    >
      <svg class="menu-icon" viewBox="0 -960 960 960" width="30" height="30">
        <path
          d="M38.67-160v-100q0-34.67 17.83-63.17T105.33-366q69.34-31.67 129.67-46.17 60.33-14.5 123.67-14.5 63.33 0 123.33 14.5T611.33-366q31 14.33 49.17 42.83T678.67-260v100h-640Zm706.66 0v-102.67q0-56.66-29.5-97.16t-79.16-66.84q63 7.34 118.66 22.5 55.67 15.17 94 35.5 34 19.34 53 46.17 19 26.83 19 59.83V-160h-176ZM358.67-480.67q-66 0-109.67-43.66Q205.33-568 205.33-634T249-743.67q43.67-43.66 109.67-43.66t109.66 43.66Q512-700 512-634t-43.67 109.67q-43.66 43.66-109.66 43.66ZM732-634q0 66-43.67 109.67-43.66 43.66-109.66 43.66-11 0-25.67-1.83-14.67-1.83-25.67-5.5 25-27.33 38.17-64.67Q578.67-590 578.67-634t-13.17-80q-13.17-36-38.17-66 12-3.67 25.67-5.5 13.67-1.83 25.67-1.83 66 0 109.66 43.66Q732-700 732-634ZM105.33-226.67H612V-260q0-14.33-8.17-27.33-8.16-13-20.5-18.67-66-30.33-117-42.17-51-11.83-107.66-11.83-56.67 0-108 11.83-51.34 11.84-117.34 42.17-12.33 5.67-20.16 18.67-7.84 13-7.84 27.33v33.33Zm253.34-320.66q37 0 61.83-24.84Q445.33-597 445.33-634t-24.83-61.83q-24.83-24.84-61.83-24.84t-61.84 24.84Q272-671 272-634t24.83 61.83q24.84 24.84 61.84 24.84Zm0 320.66Zm0-407.33Z"
        />
      </svg>
      @if (!isCollapsed) {
      <span>Clientes</span>
      }
    </button>

    <button
      routerLink="/ventas"
      [class.collapsed]="isCollapsed"
      matTooltip="Ventas"
      matTooltipPosition="right"
      matTooltipClass="tooltip-arrow"
      [matTooltipDisabled]="!isCollapsed"
    >
      <svg class="menu-icon" viewBox="0 -960 960 960" width="30" height="30">
        <path
          d="m860.67-399.33-299.34 300q-10 9.66-22.5 14.5-12.5 4.83-25 4.83T489-85q-12.33-5-22.33-14.33L99.67-467q-9-9-14.34-21.14Q80-500.27 80-513.67v-299.66q0-27.5 19.58-47.09Q119.17-880 146.67-880H447q13.38 0 25.92 5.42 12.55 5.41 21.75 14.58l366 366.33q10.26 10 14.96 22.5 4.7 12.5 4.7 25t-4.83 25q-4.83 12.5-14.83 21.84ZM515-145.33l299.33-300-367.66-368h-300v298l368.33 370ZM250-656q22.33 0 38.5-16.17 16.17-16.16 16.17-38.5 0-22.33-16.17-38.5-16.17-16.16-38.5-16.16t-38.5 16.16q-16.17 16.17-16.17 38.5 0 22.34 16.17 38.5Q227.67-656 250-656Zm230.67 176.67Z"
        />
      </svg>
      @if (!isCollapsed) {
      <span>Ventas</span>
      }
    </button>
  </nav>

  <div class="bottom-section">
    <button class="profile-btn" (click)="toggleProfileMenu()">
      @if (isLoggedIn$ | async) {
        <img src="https://placehold.co/30x30/007bff/ffffff?text=LOGO" alt="Logo de la empresa" class="company-logo" />
      } @else {
        <svg class="profile-icon" viewBox="0 0 512 512" width="30" height="30">
          <path
            d="M406.5 399.6C387.4 352.9 341.5 320 288 320l-64 0c-53.5 0-99.4 32.9-118.5 79.6C69.9 362.2 48 311.7 48 256C48 141.1 141.1 48 256 48s208 93.1 208 208c0 55.7-21.9 106.2-57.5 143.6zm-40.1 32.7C334.4 452.4 296.6 464 256 464s-78.4-11.6-110.5-31.7c7.3-36.7 39.7-64.3 78.5-64.3l64 0c38.8 0 71.2 27.6 78.5 64.3zM256 512A256 256 0 1 0 256 0a256 256 0 1 0 0 512zm0-272a40 40 0 1 1 0-80 40 40 0 1 1 0 80zm-88-40a88 88 0 1 0 176 0 88 88 0 1 0 -176 0z"
          />
        </svg>
      }
      
      @if (!isCollapsed) {
        <span>{{ (currentUser$ | async)?.username || 'PERFIL' }}</span>
      }
    </button>

    @if (showProfileMenu) {
      <div class="profile-menu">
        <button (click)="logout()">
          Cerrar sesión
        </button>
      </div>
    }
  </div>
</div>